---
import Layout from '~/layouts/PageLayout.astro';
import HeroText from '~/components/widgets/HeroText.astro';
import { fetchArticles } from '~/services/api.js';

// Titre et métadonnées pour la page
const metadata = {
  title: 'Actualités',
};

// Récupération des articles depuis PocketBase
const articles = await fetchArticles();
---

<Layout metadata={metadata}>


  <section class="space-y-8 max-w-5xl mx-auto">
    {articles.length > 0 ? (
      articles.map((article) => (
        <div class="border p-4 rounded-md shadow-md">
          <h2 class="text-xl font-bold">{article.titre}</h2>
          <p class="text-gray-700">{article.resume}</p>
          <a
            href={`/actualites/${article.id}`}
            class="text-blue-500 underline"
          >
            Lire la suite →
          </a>
        </div>
      ))
    ) : (
      <p>Aucune actualité disponible pour le moment.</p>
    )}
  </section>
</Layout>
